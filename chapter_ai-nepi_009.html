<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.14">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matteo Ottaviani &amp; Stephan Stahlschmidt">
<meta name="dcterms.date" content="2025-01-01">

<title>9&nbsp; The Representation of SDG-Related Research in Bibliometric Databases: A Conceptual Inquiry via LLMs – AI-NEPI Conference Proceedings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter_ai-nepi_010.html" rel="next">
<link href="./chapter_ai-nepi_008.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-8f1af79587c2686b78fe4e1fbadd71ab.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-7d85b766abd26745604bb74d2576c60a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter_ai-nepi_009.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The Representation of SDG-Related Research in Bibliometric Databases: A Conceptual Inquiry via LLMs</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">AI-NEPI Conference Proceedings</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">AI-NEPI Conference Proceedings - Enhanced Edition</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_001.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Large Language Models for the History, Philosophy, and Sociology of Science</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_003.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Large Language Models in History, Philosophy, and Sociology of Science</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_004.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introducing OpenAlex Mapper</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_005.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Genre Classification for Historical Medical Periodicals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_006.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The VERITRACE Project</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_007.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Explainable AI and AI-based Scientific Insights in the Humanities</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_008.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Validation is All You Need</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_009.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The Representation of SDG-Related Research in Bibliometric Databases: A Conceptual Inquiry via LLMs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_010.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Extracting Citation Data from Law and Humanities Scholarship Using LLMs and a Specialized Gold Standard Dataset</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_011.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">AI Solutions for Academic Information Retrieval: The Ghostwriter and EverythingData Approach</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_012.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">RAG systems solve central problems of LLMs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_015.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Quantum gravity and plural pursuit in science</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_016.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">A Comparative Study of LDA and BERTopic Performance Across Text Levels</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_017.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Time-aware large language models towards a novel architecture for historical analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_018.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Leveraging Large Language Models for Metadata Enrichment and Diachronic Analysis of Chemical Knowledge in Historical Scientific Texts</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_019.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Modelling Context and its Interplay in Language Variation and Change: A Pilot Study on the Chemical Revolution</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_020.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Our current understanding of funders of science is a limited view.</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_ai-nepi_021.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">From Source to Structure: Extracting Knowledge Graphs with LLMs</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#research-background-and-aims" id="toc-research-background-and-aims" class="nav-link" data-scroll-target="#research-background-and-aims"><span class="header-section-number">9.1</span> Research Background and Aims</a></li>
  <li><a href="#sdg-classification-in-databases" id="toc-sdg-classification-in-databases" class="nav-link" data-scroll-target="#sdg-classification-in-databases"><span class="header-section-number">9.2</span> SDG Classification in Databases</a></li>
  <li><a href="#case-study-sdgs-in-bibliometric-data" id="toc-case-study-sdgs-in-bibliometric-data" class="nav-link" data-scroll-target="#case-study-sdgs-in-bibliometric-data"><span class="header-section-number">9.3</span> Case Study: SDGs in Bibliometric Data</a></li>
  <li><a href="#chain-of-dependencies" id="toc-chain-of-dependencies" class="nav-link" data-scroll-target="#chain-of-dependencies"><span class="header-section-number">9.4</span> Chain of Dependencies</a></li>
  <li><a href="#actors-and-sdg-selection" id="toc-actors-and-sdg-selection" class="nav-link" data-scroll-target="#actors-and-sdg-selection"><span class="header-section-number">9.5</span> Actors and SDG Selection</a></li>
  <li><a href="#processed-data" id="toc-processed-data" class="nav-link" data-scroll-target="#processed-data"><span class="header-section-number">9.6</span> Processed Data</a></li>
  <li><a href="#sdg-classification-socio-dimension" id="toc-sdg-classification-socio-dimension" class="nav-link" data-scroll-target="#sdg-classification-socio-dimension"><span class="header-section-number">9.7</span> SDG Classification: Socio Dimension</a></li>
  <li><a href="#sdg-classification-economic-dimension" id="toc-sdg-classification-economic-dimension" class="nav-link" data-scroll-target="#sdg-classification-economic-dimension"><span class="header-section-number">9.8</span> SDG Classification: Economic Dimension</a></li>
  <li><a href="#llm-technology-and-key-findings" id="toc-llm-technology-and-key-findings" class="nav-link" data-scroll-target="#llm-technology-and-key-findings"><span class="header-section-number">9.9</span> LLM Technology and Key Findings</a></li>
  <li><a href="#sdg-4-quality-education-targets" id="toc-sdg-4-quality-education-targets" class="nav-link" data-scroll-target="#sdg-4-quality-education-targets"><span class="header-section-number">9.10</span> SDG 4: Quality Education Targets</a></li>
  <li><a href="#prompts-for-benchmarking" id="toc-prompts-for-benchmarking" class="nav-link" data-scroll-target="#prompts-for-benchmarking"><span class="header-section-number">9.11</span> Prompts for Benchmarking</a></li>
  <li><a href="#research-design-database-and-sdg-specificity" id="toc-research-design-database-and-sdg-specificity" class="nav-link" data-scroll-target="#research-design-database-and-sdg-specificity"><span class="header-section-number">9.12</span> Research Design: Database and SDG Specificity</a></li>
  <li><a href="#illustrative-example-sdg-4-analysis" id="toc-illustrative-example-sdg-4-analysis" class="nav-link" data-scroll-target="#illustrative-example-sdg-4-analysis"><span class="header-section-number">9.13</span> Illustrative Example: SDG 4 Analysis</a></li>
  <li><a href="#systematic-overlooks-by-the-llm" id="toc-systematic-overlooks-by-the-llm" class="nav-link" data-scroll-target="#systematic-overlooks-by-the-llm"><span class="header-section-number">9.14</span> Systematic Overlooks by the LLM</a></li>
  <li><a href="#cross-sdg-considerations" id="toc-cross-sdg-considerations" class="nav-link" data-scroll-target="#cross-sdg-considerations"><span class="header-section-number">9.15</span> Cross-SDG Considerations</a></li>
  <li><a href="#case-study-summary" id="toc-case-study-summary" class="nav-link" data-scroll-target="#case-study-summary"><span class="header-section-number">9.16</span> Case Study Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The Representation of SDG-Related Research in Bibliometric Databases: A Conceptual Inquiry via LLMs</span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Matteo Ottaviani &amp; Stephan Stahlschmidt <a href="mailto:ottaviani@dzhw.eu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            DZHW berlin
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="overview">Overview</h2>
<p>This chapter details a conceptual inquiry into the representation of Sustainable Development Goal (<em>SDG</em>)-related research within bibliometric databases, employing Large Language Models (<em>LLMs</em>) to detect inherent biases. Ottaviani and Stahlschmidt aimed to utilise <em>LLMs</em> as a technological tool for assessing biases in publications classified across three prominent bibliometric databases: Web of Science, Scopus, and OpenAlex. Their study highlights the critical, yet performative, role of these databases in the sociology of science, acknowledging their influence on academic behaviour, funding, and policy, whilst also noting their susceptibility to political and commercial interests.</p>
<p>The research team’s methodology involved training a pre-existing, open-source <em>LLM</em>, <em>DistilGPT2</em>, on a shared corpus of over 15 million publications classified by the three databases. This approach circumvented the resource-intensive process of training an <em>LLM</em> from scratch, whilst ensuring minimal prior semantic knowledge. The project specifically focused on five <em>SDGs</em> related to socio-economic inequalities: <em>SDG4</em> (Quality Education), <em>SDG5</em> (Gender Equality), <em>SDG10</em> (Reduced Inequalities), <em>SDG8</em> (Decent Work and Economic Growth), and <em>SDG9</em> (Industry, Innovation, and Infrastructure).</p>
<p>A key component of the research design involved crafting 80-120 specific prompts for each <em>SDG</em>, derived from their respective targets, to serve as a benchmark for compliance and bias detection. The fine-tuned <em>LLM</em> processed these prompts using various decoding strategies (top-k, nucleus, contrastive search), generating responses from which noun phrases were extracted. Analysis of these noun phrases across four dimensions—locations, actors, data/metrics, and focuses—revealed a systematic overlook in the bibliometric data. The <em>LLM</em>’s responses consistently neglected disadvantaged categories of individuals, the poorest countries, and sensitive, underrepresented topics explicitly addressed by <em>SDG</em> targets, instead concentrating on economically powerful and highly developed nations. This finding underscores the decisive impact of seemingly objective science-informed practices, such as bibliometric classification, on research representation and, consequently, on policy and resource allocation. The authors acknowledge limitations, including the general framework and the high sensitivity of <em>LLMs</em> to architectural choices, training data, and decoding strategies.</p>
</section>
<section id="research-background-and-aims" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="research-background-and-aims"><span class="header-section-number">9.1</span> Research Background and Aims</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ai-nepi_009_slide_02.png" class="img-fluid figure-img"></p>
<figcaption>Slide 02</figcaption>
</figure>
</div>
<p>Ottaviani and Stahlschmidt embarked on this project with the primary aim of employing Large Language Models (<em>LLMs</em>) as a technological instrument to discern biases. Specifically, they sought to identify biases originating from publications classified within three prominent bibliometric databases. This foundational objective guided their subsequent methodological development.</p>
</section>
<section id="sdg-classification-in-databases" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="sdg-classification-in-databases"><span class="header-section-number">9.2</span> SDG Classification in Databases</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ai-nepi_009_slide_06.png" class="img-fluid figure-img"></p>
<figcaption>Slide 06</figcaption>
</figure>
</div>
<p>Bibliometric databases function as critical digital infrastructures, enabling extensive bibliometric analyses and impact assessments across the scientific community. These systems, however, exhibit a performative nature, fundamentally shaped by particular understandings of the scientific landscape and inherent value attributions, as scholarly works by Whitley (2000) and Winkler (1988) demonstrate. Consequently, they exert considerable influence over the conduct of academics, researchers, funding institutions, and policymakers alike. Crucially, these databases also reflect and respond to diverse political and commercial interests.</p>
<p>In recent years, leading bibliometric platforms, including Web of Science, Scopus, and OpenAlex, have implemented classifications designed to align publications with the United Nations Sustainable Development Goals (<em>SDGs</em>). Nevertheless, prior research, notably by Armitage et al.&nbsp;(2020), has revealed that <em>SDG</em> labelling practices across different providers—such as Elsevier, Bergen, and Aurora—produce markedly divergent results, exhibiting very limited overlap. These inconsistencies in classification can distort perceptions of research priorities, thereby potentially affecting resource allocation and policy decisions, often influenced by underlying political and commercial agendas.</p>
</section>
<section id="case-study-sdgs-in-bibliometric-data" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="case-study-sdgs-in-bibliometric-data"><span class="header-section-number">9.3</span> Case Study: SDGs in Bibliometric Data</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ai-nepi_009_slide_08.png" class="img-fluid figure-img"></p>
<figcaption>Slide 08</figcaption>
</figure>
</div>
<p>This case study, conducted by Ottaviani and Stahlschmidt (2024), specifically investigates the aggregated effects on the representation of <em>SDG</em>-related research within bibliometric databases following the introduction of <em>LLM</em>-based tools. The authors adopted a methodological approach that involved deploying “little” pre-trained Large Language Models, notably <em>DistilGPT2</em>. They trained these models independently on distinct subsets of publication abstracts, each corresponding to the <em>SDG</em> classifications derived from various bibliometric databases. This <em>LLM</em> technology served a dual purpose: firstly, as a detector of inherent biases within the data; and secondly, as a proof-of-concept exercise demonstrating its potential for automating information extraction to inform research-related decision-making processes.</p>
</section>
<section id="chain-of-dependencies" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="chain-of-dependencies"><span class="header-section-number">9.4</span> Chain of Dependencies</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ai-nepi_009_slide_10.png" class="img-fluid figure-img"></p>
<figcaption>Slide 10</figcaption>
</figure>
</div>
<p>The research delineates a partial chain of dependencies, illustrating the intricate relationships within the science-policy interface. Initially, <em>SDG</em> classification directly defines the scope and nature of “Research” on <em>SDGs</em>. Subsequently, a diverse array of stakeholders, including researchers, Small and Medium-sized Enterprises (<em>SMEs</em>), governments, and various intermediate figures, actively process this <em>SDG</em>-focused research. This processed research then critically informs “Decision-making to align with <em>SDGs</em>,” which, in turn, directly impacts “Socioeconomic inequalities.”</p>
<p>Crucially, the study positions the <em>LLM</em> as a “detector of ‘biases’” operating at the level of “Research” on <em>SDGs</em>. The “Introduction of <em>LLM</em> in Research Policy” emerges as a direct consequence of this bias detection, and this intervention ultimately influences “Socioeconomic inequalities.” Fundamentally, <em>LLMs</em> possess the capacity to alter the metadata associated with <em>SDG</em> research, thereby profoundly influencing the advice provided, choices made, indicators developed, and measures implemented within policy frameworks.</p>
</section>
<section id="actors-and-sdg-selection" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="actors-and-sdg-selection"><span class="header-section-number">9.5</span> Actors and SDG Selection</h2>
<p>The study focused on three principal bibliometric databases: Web of Science, a proprietary platform from Clarivate (US); Scopus, another proprietary service provided by Elsevier (UK); and OpenAlex, an open-access resource formerly associated with Microsoft (US). The authors strategically selected five Sustainable Development Goals to specifically model socio-economic inequalities. These included three <em>SDGs</em> representing the equity or socio dimension: <em>SDG4</em> (Quality Education), <em>SDG5</em> (Gender Equality), and <em>SDG10</em> (Reduce Inequalities). Additionally, two <em>SDGs</em> were chosen to represent the economic and technological development dimension: <em>SDG8</em> (Decent Work and Economic Growth) and <em>SDG9</em> (Industry, Innovation, and Infrastructure).</p>
</section>
<section id="processed-data" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="processed-data"><span class="header-section-number">9.6</span> Processed Data</h2>
<p>The research team processed a substantial dataset, comprising a jointly indexed subset of 15,471,336 publications. They meticulously collected these publications by identifying those shared across all three bibliometric databases—Web of Science, Scopus, and OpenAlex—through precise <em>DOI</em> matching. This collection spanned a timeframe from January 2015 to July 2023. The project then assessed the performance of the three distinct classification standards for the five selected <em>SDGs</em>. Consequently, for each <em>SDG</em>, three separate publication subsets emerged, each attributed to a specific bibliometric database. This rigorous approach, applying classification solely to the shared corpus, established a robust benchmark for subsequent comparative analysis.</p>
</section>
<section id="sdg-classification-socio-dimension" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="sdg-classification-socio-dimension"><span class="header-section-number">9.7</span> SDG Classification: Socio Dimension</h2>
<p>Initial results from the comparative analysis of <em>SDG</em>-classified papers, focusing on the socio dimension, strongly corroborate the findings of Armitage (2020), demonstrating a consistently minimal overlap in <em>SDG</em> labelling across the bibliometric databases.</p>
<p>For <em>SDG 04</em>, pertaining to Quality Education:</p>
<ul>
<li><p>Web of Science identified 124,359 publications (19.1%).</p></li>
<li><p>OpenAlex identified 218,907 (33.6%).</p></li>
<li><p>Scopus identified 339,063 (52.2%).</p></li>
</ul>
<p>The overlaps comprised:</p>
<ul>
<li><p>59,002 (9.0%) between Web of Science and OpenAlex.</p></li>
<li><p>35,733 (5.5%) between Web of Science and Scopus.</p></li>
<li><p>35,733 (5.5%) between OpenAlex and Scopus.</p></li>
<li><p>A mere 46,711 (7.2%) across all three platforms.</p></li>
</ul>
<p>Regarding <em>SDG 05</em>, Gender Equality:</p>
<ul>
<li><p>Web of Science classified 37,324 publications (57.4%).</p></li>
<li><p>OpenAlex classified 71,727 (9.4%).</p></li>
<li><p>Scopus classified 82,273 (12.7%).</p></li>
</ul>
<p>The overlaps were similarly low:</p>
<ul>
<li><p>31,210 (4.8%) for Web of Science and OpenAlex.</p></li>
<li><p>26,377 (4.1%) for Web of Science and Scopus.</p></li>
<li><p>34,898 (5.4%) for OpenAlex and Scopus.</p></li>
<li><p>38,066 (12.1%) for all three.</p></li>
</ul>
<p>A notable observation emerged for <em>SDG 05</em>: whilst Scopus contained publications relevant to this goal, it often did not classify them as such. Furthermore, Web of Science classified approximately 10% of its <em>SDG 05</em> publications from the field of mathematics, including topics such as geometrical differential equations, suggesting potential misclassification or a failure to capture relevant content comprehensively.</p>
<p>For <em>SDG 10</em>, focused on Reducing Inequalities:</p>
<ul>
<li><p>Web of Science identified 95,460 publications (12.2%).</p></li>
<li><p>OpenAlex identified 213,419 (43.3%).</p></li>
<li><p>Scopus identified 236,665 (30.2%).</p></li>
</ul>
<p>The overlaps were:</p>
<ul>
<li><p>25,277 (3.2%) for Web of Science and OpenAlex.</p></li>
<li><p>22,540 (2.9%) for Web of Science and Scopus.</p></li>
<li><p>18,850 (2.4%) for OpenAlex and Scopus.</p></li>
<li><p>Only 10,853 (1.3%) across all three databases.</p></li>
</ul>
<p>These figures consistently highlight the significant discrepancies in how different bibliometric databases classify <em>SDG</em>-related research.</p>
</section>
<section id="sdg-classification-economic-dimension" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="sdg-classification-economic-dimension"><span class="header-section-number">9.8</span> SDG Classification: Economic Dimension</h2>
<p>The comparative analysis extended to the economic dimension of <em>SDG</em>-classified papers, revealing similar patterns of limited overlap.</p>
<p>For <em>SDG 08</em>, focusing on Decent Work and Economic Growth:</p>
<ul>
<li><p>Web of Science identified 82,366 publications (19.0%).</p></li>
<li><p>OpenAlex identified 121,106 (28.0%).</p></li>
<li><p>Scopus identified 183,641 (37.8%).</p></li>
</ul>
<p>The overlaps comprised:</p>
<ul>
<li><p>16,268 (3.8%) for Web of Science and OpenAlex.</p></li>
<li><p>8,020 (1.9%) for Web of Science and Scopus.</p></li>
<li><p>39,071 (9.0%) for OpenAlex and Scopus.</p></li>
<li><p>10,853 (2.5%) across all three databases.</p></li>
</ul>
<p>Similarly, for <em>SDG 09</em>, concerning Industry, Innovation, and Infrastructure:</p>
<ul>
<li><p>Web of Science classified 230,883 publications (30.3%).</p></li>
<li><p>OpenAlex classified 217,822 (28.6%).</p></li>
<li><p>Scopus classified 200,566 (26.4%).</p></li>
</ul>
<p>Overlaps included:</p>
<ul>
<li><p>25,679 (3.4%) for Web of Science and OpenAlex.</p></li>
<li><p>26,501 (3.5%) for Web of Science and Scopus.</p></li>
<li><p>44,702 (5.9%) for OpenAlex and Scopus.</p></li>
<li><p>15,186 (2.0%) for all three.</p></li>
</ul>
<p>These figures consistently underscore the significant discrepancies in how different bibliometric databases classify <em>SDG</em>-related research, even within the economic dimension.</p>
</section>
<section id="llm-technology-and-key-findings" class="level2" data-number="9.9">
<h2 data-number="9.9" class="anchored" data-anchor-id="llm-technology-and-key-findings"><span class="header-section-number">9.9</span> LLM Technology and Key Findings</h2>
<p>Ottaviani and Stahlschmidt modelled the Large Language Model (<em>LLM</em>) technology with a specific objective: to develop an <em>LLM</em> whose knowledge base originated exclusively from publications classified under a particular Sustainable Development Goal by a given bibliometric database. Recognising the substantial resources required to train an <em>LLM</em> from scratch, they adopted a pragmatic compromise: fine-tuning an existing, pre-trained, open-source <em>LLM</em>. <em>DistilGPT2</em> emerged as the chosen model, primarily due to its fundamental architecture and minimal prior knowledge, which ensured the absence of pre-existing semantic understanding concerning either publications or prompts.</p>
<p>The primary finding from this investigation highlights a systematic overlook within the data, specifically regarding certain actors, the world’s poorest countries, and various underrepresented topics. However, the authors acknowledge several limitations. Their framework remains general, implying that specific applied cases might yield different outcomes. Moreover, <em>LLMs</em> inherently demonstrate high sensitivity to their underlying model architecture, the characteristics of their training data, the chosen (hyper-)parameters, and the decoding strategies employed. Whilst Ottaviani and Stahlschmidt partially accounted for training data variability by incorporating three distinct databases, and for decoding strategies by utilising three methods from existing literature, the need for more advanced <em>LLM</em> architectures persists.</p>
</section>
<section id="sdg-4-quality-education-targets" class="level2" data-number="9.10">
<h2 data-number="9.10" class="anchored" data-anchor-id="sdg-4-quality-education-targets"><span class="header-section-number">9.10</span> SDG 4: Quality Education Targets</h2>
<p>Sustainable Development Goal 4 mandates the assurance of inclusive and equitable quality education, alongside the promotion of lifelong learning opportunities for all. A series of specific targets underpins this overarching goal, each outlining a crucial aspect of educational development.</p>
<p>For instance:</p>
<ul>
<li><p><em>Target 4.1</em> stipulates that by 2030, all girls and boys must complete free, equitable, and high-quality primary and secondary education, leading to demonstrably relevant and effective learning outcomes.</p></li>
<li><p><em>Target 4.2</em> focuses on ensuring universal access to quality early childhood development, care, and pre-primary education by the same year, preparing children for primary schooling.</p></li>
<li><p><em>Target 4.3</em> aims for equal access to affordable and quality technical, vocational, and tertiary education, including university, for all women and men by 2030.</p></li>
<li><p><em>Target 4.4</em> seeks to substantially increase the number of young people and adults possessing relevant skills, particularly technical and vocational proficiencies, for employment, decent work, and entrepreneurship.</p></li>
<li><p><em>Target 4.5</em> addresses the elimination of gender disparities in education and guarantees equal access to all educational levels and vocational training for vulnerable populations, including individuals with disabilities, indigenous peoples, and children in precarious situations.</p></li>
<li><p><em>Target 4.6</em> commits to ensuring that all youth and a significant proportion of adults, irrespective of gender, achieve literacy and numeracy by 2030.</p></li>
</ul>
<p>These targets collectively form the framework of the 2030 Agenda for <em>SDGs</em>, as defined by the United Nations.</p>
</section>
<section id="prompts-for-benchmarking" class="level2" data-number="9.11">
<h2 data-number="9.11" class="anchored" data-anchor-id="prompts-for-benchmarking"><span class="header-section-number">9.11</span> Prompts for Benchmarking</h2>
<p>To establish a robust benchmarking system, Ottaviani and Stahlschmidt meticulously crafted prompts for each Sustainable Development Goal. Each <em>SDG</em> comprises a comprehensive list of between eight and twelve specific targets. For every individual target, the authors systematically developed ten diverse questions, or prompts, with each question designed to explore a distinct facet of that target. This rigorous process yielded a specific set of 80 to 120 prompts for each <em>SDG</em>, collectively serving as a critical benchmark or standard for both defining compliance with the <em>SDGs</em> and identifying potential biases within the data. For instance, prompts such as, “How can countries ensure that all girls and boys complete free, equitable and quality primary and secondary education by 2030?” interrogated <em>Target 4.1</em>, which aims to ensure that all girls and boys complete free, equitable, and quality primary and secondary education by 2030.</p>
</section>
<section id="research-design-database-and-sdg-specificity" class="level2" data-number="9.12">
<h2 data-number="9.12" class="anchored" data-anchor-id="research-design-database-and-sdg-specificity"><span class="header-section-number">9.12</span> Research Design: Database and SDG Specificity</h2>
<p>The research design meticulously outlines the process for analysing <em>SDG</em>-related content within bibliometric databases. The workflow commenced with an initial input comprising a set of abstracts, each classified according to a specific <em>SDG</em> and originating from a particular database. The authors then applied a crucial fine-tuning process to this dataset, utilising the <em>DistilGPT-2</em> model. The output of this fine-tuning was a specialised “Fine-tuned <em>DistilGPT-2</em>” model, tailored to each specific <em>SDG</em> and database combination.</p>
<p>Subsequently, a dedicated set of prompts, crafted specifically for each <em>SDG</em>, served as input to the fine-tuned <em>LLM</em>. To generate diverse and relevant outputs, Ottaviani and Stahlschmidt applied three distinct decoding strategies: top-k, nucleus, and contrastive search. The <em>LLM</em> produced corresponding responses for each <em>SDG</em> and database, categorised by the decoding strategy employed. A final post-processing step involved applying a “prompts’ words filter” to these responses, ultimately yielding a refined set of noun phrases pertinent to each <em>SDG</em> and database.</p>
</section>
<section id="illustrative-example-sdg-4-analysis" class="level2" data-number="9.13">
<h2 data-number="9.13" class="anchored" data-anchor-id="illustrative-example-sdg-4-analysis"><span class="header-section-number">9.13</span> Illustrative Example: SDG 4 Analysis</h2>
<p>As an illustrative example, the analysis of <em>SDG 4</em> involved a systematic method of matching noun phrases, extracted from the <em>LLM</em>’s responses, directly against the specific <em>SDG</em> targets. Ottaviani and Stahlschmidt employed four critical data dimensions for this analysis: Locations, Actors, Data/Metrics, and Focuses. For each <em>SDG</em>, this comprehensive approach facilitated a dual assessment: firstly, evaluating the degree of compliance with its stated targets; and secondly, identifying any inherent biases within the data. Notably, the analysis consistently revealed distinct differences across the various bibliometric databases. A structured table organised these findings, categorising them by unique databases and indicating which targets were addressed or not addressed across the dimensions of locations, actors, data/metrics, and focuses.</p>
</section>
<section id="systematic-overlooks-by-the-llm" class="level2" data-number="9.14">
<h2 data-number="9.14" class="anchored" data-anchor-id="systematic-overlooks-by-the-llm"><span class="header-section-number">9.14</span> Systematic Overlooks by the LLM</h2>
<p>Despite the <em>LLM</em>’s stimulation, its responses consistently overlooked several critical areas, revealing systematic biases within the underlying data. Geographically, the model rarely addressed African countries, with the notable exception of South Africa, and largely ignored other developing nations, including China (though this observation carried a degree of uncertainty). The model also largely overlooked least developed countries and small island developing states.</p>
<p>In terms of human actors, the <em>LLM</em> systematically overlooked vulnerable populations, persons with disabilities, indigenous peoples, and children in vulnerable situations. Furthermore, the model failed to adequately focus on several key thematic areas explicitly outlined in the <em>SDGs</em>. These included vocational training, scholarships, the establishment of safe, non-violent, inclusive, and effective educational environments, the promotion of sustainable lifestyles, human rights, the cultivation of a culture of peace and non-violence, global citizenship, and the appreciation of cultural diversity. Crucially, the <em>LLM</em> also neglected to address the fundamental concepts of free primary and secondary education, and tertiary education.</p>
</section>
<section id="cross-sdg-considerations" class="level2" data-number="9.15">
<h2 data-number="9.15" class="anchored" data-anchor-id="cross-sdg-considerations"><span class="header-section-number">9.15</span> Cross-SDG Considerations</h2>
<p>Across the five Sustainable Development Goals analysed, several consistent patterns emerged. Geographically, the <em>LLM</em>’s responses rarely addressed least developed countries, with South-Saharan Africa, for instance, receiving minimal attention in relation to <em>SDG8</em>. The United States maintained an undeniable dominance in location mentions, followed by South Africa and China as the most frequently cited countries, with the UK and Australia also featuring prominently.</p>
<p>Regarding metrics, the <em>LLM</em>’s output included references to various data sources, such as the Demographic and Health Surveys (<em>DHS</em>) and the World Values Survey (<em>WVS</em>), alongside mentions of general metrics, indicators, and benchmarks. The discussed research methodologies spanned theoretical frameworks, empirical studies, thematic analysis, market dynamics, and macroeconomics. However, concerning human actors, the analysis consistently revealed a systematic overlook of discriminated and vulnerable categories across all <em>SDGs</em>. Furthermore, whilst the <em>LLM</em> addressed some <em>SDG</em>-specific focuses, it notably omitted the most sensitive topics, such as human trafficking, human exploitation, and migration.</p>
</section>
<section id="case-study-summary" class="level2" data-number="9.16">
<h2 data-number="9.16" class="anchored" data-anchor-id="case-study-summary"><span class="header-section-number">9.16</span> Case Study Summary</h2>
<p>The case study’s findings reveal a critical insight: the integration of Large Language Models as an analytical <em>AI</em> tool, positioned between <em>SDG</em> classification and the policymaking process, exposes a systematic oversight within the scientific publications classified by <em>SDGs</em>. This oversight consistently neglects the most disadvantaged categories of individuals, the world’s poorest countries, and crucial underrepresented topics explicitly targeted by the <em>SDGs</em>. Conversely, the analysis demonstrates that economic superpowers and highly developing nations receive disproportionate attention. These results unequivocally highlight the profound and decisive impact of seemingly objective, science-informed practices, such as the bibliometric classification of <em>SDGs</em>, on the representation of global challenges.</p>
<p>The authors acknowledge several limitations. The <em>LLM</em>’s performance exhibits high sensitivity to its model architecture, the characteristics of its training data (though partially mitigated by incorporating three distinct databases), the chosen (hyper-)parameters, and the decoding strategies employed (which were also partially accounted for). Furthermore, the research operates within a general framework, suggesting that its applicability to highly specific contexts may require further investigation. Future work should therefore explore the development of more sophisticated <em>LLM</em> architectures to address these sensitivities.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter_ai-nepi_008.html" class="pagination-link" aria-label="Validation is All You Need">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Validation is All You Need</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapter_ai-nepi_010.html" class="pagination-link" aria-label="Extracting Citation Data from Law and Humanities Scholarship Using LLMs and a Specialized Gold Standard Dataset">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Extracting Citation Data from Law and Humanities Scholarship Using LLMs and a Specialized Gold Standard Dataset</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>